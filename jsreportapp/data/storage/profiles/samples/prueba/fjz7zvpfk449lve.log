{"type":"operationStart","subtype":"profile","data":{"_id":"p1u8KZQtEWL4wmrA","timestamp":"2023-02-09T20:20:01.955Z","state":"queued","mode":"full","creationDate":"2023-02-09T20:20:01.956Z","modificationDate":"2023-02-09T20:20:01.956Z","shortid":"g7YM9_m","$entitySet":"profiles"},"doDiffs":false,"timestamp":1675974001955,"id":"tixwq2ev9102rv3","previousOperationId":null,"operationId":"lo0n00doawe9pdz"}
{"type":"log","level":"info","message":"Render request 5 queued for execution and waiting for available worker","previousOperationId":"lo0n00doawe9pdz","timestamp":1675974001956,"id":"truyx1ly3b84go4"}
{"type":"operationStart","subtype":"render","name":"prueba","previousOperationId":"lo0n00doawe9pdz","timestamp":1675974001965,"id":"pz40kksuy64tgce","previousEventId":"tixwq2ev9102rv3","operationId":"ax3he0nir1rvhx5","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,0 +1,1 @@\n\\ No newline at end of file\n+{}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -1,0 +1,42 @@\n\\ No newline at end of file\n+{\n+  \"template\": {\n+    \"name\": \"prueba\",\n+    \"recipe\": \"chrome-pdf\",\n+    \"shortid\": \"imWjwuuN8d\",\n+    \"folder\": {\n+      \"shortid\": \"aTWHPK0\"\n+    },\n+    \"engine\": \"handlebars\",\n+    \"data\": null,\n+    \"chrome\": {\n+      \"printBackground\": true\n+    },\n+    \"scripts\": [\n+      {\n+        \"scope\": \"template\",\n+        \"name\": \"script\",\n+        \"shortid\": \"9kt7BZNRPh\",\n+        \"folder\": {\n+          \"shortid\": \"aTWHPK0\"\n+        },\n+        \"_id\": \"seye6KggfniOo9IQ\",\n+        \"__entitySet\": \"scripts\",\n+        \"__name\": \"script\",\n+        \"creationDate\": \"2023-02-09T18:47:08.355Z\",\n+        \"modificationDate\": \"2023-02-09T18:47:08.355Z\",\n+        \"content\": \"// server side script fetching remote data and preparing report data source\\nconst axios = require('axios');\\n\\nasync function beforeRender(req, res) {\\n    const resAuthors = await axios.get('http://localhost:8000/api/events')\\n    req.data.authors = [];\\n    req.data.authors.push(resAuthors.data.data);\\n    return req.data.authors;\\n}\",\n+        \"__isLoaded\": true,\n+        \"__scope\": \"template\",\n+        \"__shortid\": \"9kt7BZNRPh\",\n+        \"__folder\": {\n+          \"shortid\": \"aTWHPK0\"\n+        }\n+      }\n+    ],\n+    \"creationDate\": \"2023-02-09T18:47:50.753Z\",\n+    \"modificationDate\": \"2023-02-09T20:04:31.825Z\",\n+    \"content\": \"<html>\\r\\n\\r\\n<head>\\r\\n    <meta content=\\\"text/html; charset=utf-8\\\" http-equiv=\\\"Content-Type\\\">\\r\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/metro/4.1.5/css/metro.min.css\\\">\\r\\n    <script src=\\\"https://cdn.jsdelivr.net/npm/chart.js\\\"></script>\\r\\n</head>\\r\\n\\r\\n<body>\\r\\n    <h1>Authors</h1>\\r\\n    <!-- add hiden information to the page which is resolved in OrdersHeader template\\r\\n             during the pdf merge. See the docs about pdf utils extension for more details. -->\\r\\n    <canvas id=\\\"1\\\" style=\\\"margin-bottom:30px\\\"></canvas>\\r\\n    <table class='table striped'>\\r\\n        <thead>\\r\\n            <tr>\\r\\n                <th>Nombre</th>\\r\\n                <th>Lugar</th>\\r\\n                <th>Fecha</th>\\r\\n            </tr>\\r\\n        </thead>\\r\\n        <tbody>\\r\\n            {{#each authors.[0]}}\\r\\n            <tr>\\r\\n                <td>{{nombre}}</td>\\r\\n                <td>{{lugar}}</td>\\r\\n                <td>{{fecha}}</td>\\r\\n            </tr>\\r\\n            {{/each}}\\r\\n        </tbody>\\r\\n    </table>\\r\\n    <script>\\r\\n            // convert data into js string using function from asset global helpers.js\\r\\n            // this results into something like var data = { \\\"a\\\": \\\"foo\\\" }\\r\\n            // which gets afterwards interpreted in chrome into object\\r\\n            var ctx = document.getElementById('1').getContext('2d');\\r\\n            var myChart =  new Chart(ctx, {\\r\\n                type: 'bar',\\r\\n                data: {\\r\\n                    labels: {{{toJSON authors.[1]}}},\\r\\n                    datasets: [{\\r\\n                        fillColor: 'blue',\\r\\n                        label: \\\"Number of pieces\\\",\\r\\n                        backgroundColor: \\\"rgba(27,161,226,0.2)\\\",\\r\\n                        borderColor: \\\"rgba(27,161,226,1)\\\",\\r\\n                        borderWidth: 1,\\r\\n                        hoverBackgroundColor: \\\"rgba(27,161,226,0.4)\\\",\\r\\n                        hoverBorderColor: \\\"rgba(27,161,226,1)\\\",\\r\\n                        data: {{{toJSON authors.[2]}}},\\r\\n                    }]\\r\\n                },\\r\\n                options: {\\r\\n                    animation: {\\r\\n                        duration: 0\\r\\n                    }\\r\\n                }\\r\\n            });\\r\\n        </script>\\r\\n</body>\\r\\n\\r\\n</html>\",\n+    \"helpers\": \"\"\n+  },\n+  \"data\": {}\n+}\n\\ No newline at end of file\n"}}
{"type":"log","timestamp":1675974001966,"level":"info","message":"Starting rendering request 5","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"v4o72yqenyz85jw","previousOperationId":"ax3he0nir1rvhx5"}
{"type":"log","timestamp":1675974001966,"level":"info","message":"Rendering template { name: prueba, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"u6idohq8di1vysp","previousOperationId":"ax3he0nir1rvhx5"}
{"type":"log","timestamp":1675974001967,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"axfgjbm9z2z6u2n","previousOperationId":"ax3he0nir1rvhx5"}
{"type":"log","timestamp":1675974001969,"level":"debug","message":"Executing script script (beforeRender)","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"1q1q5be3ifyfow4","previousOperationId":"ax3he0nir1rvhx5"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1675974001989,"id":"p7dxlwtd8e1ntie","previousEventId":"pz40kksuy64tgce","operationId":"zbtc63zz0ju33wu","previousOperationId":"ax3he0nir1rvhx5","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"prueba\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -4,0 +4,1 @@\n+    \"engine\": \"handlebars\",\n@@ -5,0 +6,1 @@\n+    \"data\": null,\n@@ -6,5 +8,0 @@\n-    \"folder\": {\n-      \"shortid\": \"aTWHPK0\"\n-    },\n-    \"engine\": \"handlebars\",\n-    \"data\": null,\n@@ -38,0 +35,1 @@\n+    \"_id\": \"4I6jK90YlHaNEWdC\",\n@@ -39,0 +37,3 @@\n+    \"folder\": {\n+      \"shortid\": \"aTWHPK0\"\n+    },\n"}}
{"type":"operationStart","subtype":"script","name":"scripts script","previousOperationId":"zbtc63zz0ju33wu","timestamp":1675974001989,"id":"e1pr592gal0iauv","previousEventId":"p7dxlwtd8e1ntie","operationId":"3eiprnxoo76qoz0","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n"}}
{"type":"operationEnd","operationId":"3eiprnxoo76qoz0","timestamp":1675974002198,"id":"b1yucqjgec6os9e","previousEventId":"pz40kksuy64tgce","previousOperationId":"ax3he0nir1rvhx5","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n@@ -1,1 +1,1 @@\n-{}\n\\ No newline at end of file\n+{\"reportName\":\"prueba\",\"headers\":{}}\n\\ No newline at end of file\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n@@ -4,0 +4,1 @@\n+    \"engine\": \"handlebars\",\n@@ -5,0 +6,1 @@\n+    \"data\": null,\n@@ -6,5 +8,0 @@\n-    \"folder\": {\n-      \"shortid\": \"aTWHPK0\"\n-    },\n-    \"engine\": \"handlebars\",\n-    \"data\": null,\n@@ -38,0 +35,1 @@\n+    \"_id\": \"4I6jK90YlHaNEWdC\",\n@@ -39,0 +37,3 @@\n+    \"folder\": {\n+      \"shortid\": \"aTWHPK0\"\n+    },\n@@ -41,1 +42,18 @@\n-  \"data\": {}\n+  \"data\": {\n+    \"authors\": [\n+      [\n+        {\n+          \"id\": 1,\n+          \"nombre\": \"a\",\n+          \"tipo\": \"a\",\n+          \"lugar\": \"a\",\n+          \"fecha\": \"20/03/2001\",\n+          \"horario\": \"a\",\n+          \"imagen\": null,\n+          \"director_id\": 1,\n+          \"created_at\": \"02/09/2023\",\n+          \"updated_at\": \"02/09/2023\"\n+        }\n+      ]\n+    ]\n+  }\n"}}
{"type":"operationEnd","operationId":"zbtc63zz0ju33wu","timestamp":1675974002198,"id":"f479tsh4u2jm4bp","previousEventId":"b1yucqjgec6os9e","previousOperationId":"ax3he0nir1rvhx5","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n"}}
{"type":"log","timestamp":1675974002199,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"geossnfy0y41y8n","previousOperationId":"zbtc63zz0ju33wu"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1675974002199,"id":"vttocongpxnr8kk","previousEventId":"f479tsh4u2jm4bp","operationId":"5u2ktew2vh6itjl","previousOperationId":"zbtc63zz0ju33wu","res":{"content":null,"meta":{"diff":"Index: resMeta\n===================================================================\n--- resMeta\n+++ resMeta\n"}},"req":{"diff":"Index: req\n===================================================================\n--- req\n+++ req\n"}}
{"type":"log","timestamp":1675974002199,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"gpjxwcb0atpxhip","previousOperationId":"5u2ktew2vh6itjl"}
{"type":"log","timestamp":1675974002221,"level":"warn","message":"Error when processing render request 5\n(because) error when evaluating engine handlebars for template /samples/prueba\n(because) missing helper: \"toJSON\"\n\n(sandbox.js line 13:18)\nError: Missing helper: \"toJSON\"\n    at Object.<anonymous> (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\helper-missing.js:19:13)\n    at Object.wrapper (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:29:106)\n    at main (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:216:40)\n    at sandbox.js:13:18\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/prueba\n(because) missing helper: \"toJSON\"\n    at module.exports (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:286:33)\n    at async engine.engine (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:179:19\n    at async Domain.<anonymous> (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:141:19)","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"ujy9y3gngu6zmys","previousOperationId":"5u2ktew2vh6itjl"}
{"type":"log","timestamp":1675974002221,"level":"warn","message":"Rendering request 5 finished with error in 266 ms","meta":{"rootId":"fjz7zvpfk449lve","id":"fjz7zvpfk449lve"},"id":"rz68vof7ygj2xbt","previousOperationId":"5u2ktew2vh6itjl"}
{"type":"error","timestamp":1675974002226,"entity":{"shortid":"imWjwuuN8d","name":"prueba","content":"<html>\r\n\r\n<head>\r\n    <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/metro/4.1.5/css/metro.min.css\">\r\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n</head>\r\n\r\n<body>\r\n    <h1>Authors</h1>\r\n    <!-- add hiden information to the page which is resolved in OrdersHeader template\r\n             during the pdf merge. See the docs about pdf utils extension for more details. -->\r\n    <canvas id=\"1\" style=\"margin-bottom:30px\"></canvas>\r\n    <table class='table striped'>\r\n        <thead>\r\n            <tr>\r\n                <th>Nombre</th>\r\n                <th>Lugar</th>\r\n                <th>Fecha</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {{#each authors.[0]}}\r\n            <tr>\r\n                <td>{{nombre}}</td>\r\n                <td>{{lugar}}</td>\r\n                <td>{{fecha}}</td>\r\n            </tr>\r\n            {{/each}}\r\n        </tbody>\r\n    </table>\r\n    <script>\r\n            // convert data into js string using function from asset global helpers.js\r\n            // this results into something like var data = { \"a\": \"foo\" }\r\n            // which gets afterwards interpreted in chrome into object\r\n            var ctx = document.getElementById('1').getContext('2d');\r\n            var myChart =  new Chart(ctx, {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: {{{toJSON authors.[1]}}},\r\n                    datasets: [{\r\n                        fillColor: 'blue',\r\n                        label: \"Number of pieces\",\r\n                        backgroundColor: \"rgba(27,161,226,0.2)\",\r\n                        borderColor: \"rgba(27,161,226,1)\",\r\n                        borderWidth: 1,\r\n                        hoverBackgroundColor: \"rgba(27,161,226,0.4)\",\r\n                        hoverBorderColor: \"rgba(27,161,226,1)\",\r\n                        data: {{{toJSON authors.[2]}}},\r\n                    }]\r\n                },\r\n                options: {\r\n                    animation: {\r\n                        duration: 0\r\n                    }\r\n                }\r\n            });\r\n        </script>\r\n</body>\r\n\r\n</html>"},"property":"helpers","statusCode":400,"weak":true,"logged":true,"previousOperationId":"5u2ktew2vh6itjl","id":"v2q5n38or5ura5l","stack":"Error: Missing helper: \"toJSON\"\n    at Object.<anonymous> (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\helpers\\helper-missing.js:19:13)\n    at Object.wrapper (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:29:106)\n    at main (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:216:40)\n    at sandbox.js:13:18\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/prueba\n(because) missing helper: \"toJSON\"\n    at module.exports (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:286:33)\n    at async engine.engine (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:62:23)\n    at async WorkerReporter._render (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:147:7)\n    at async C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:179:19\n    at async Domain.<anonymous> (C:\\Users\\josei\\Desktop\\mimadre\\proyectoOFGC\\jsreportapp\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:141:19)","message":"Error when evaluating engine handlebars for template /samples/prueba\n(because) missing helper: \"toJSON\"\n\n(sandbox.js line 13:18)"}
